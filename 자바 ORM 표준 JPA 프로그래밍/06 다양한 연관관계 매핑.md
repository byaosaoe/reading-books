- 엔티티의 연관관계를 매핑할 때는 다음 3가지를 고려해야 한다.
1. 다중성
    - 보통 다대일과 일대다 관계를 가장 많이 사용하고, 다대다 관계는 실무에서 거의 사용하지 않는다.
2. 단방향, 양방향
    - 객체는 참조용 필드를 가지고 있는 객체만 연관된 객체를 조회할 수 있다.
3. 연관관계의 주인
    - 외래키를 가진 테이블과 매핑한 엔티티가 왜리키를 관리하는게 효율적이다.
    - 주인이 아닌 방향은 외래키를 변경할 수 없고 읽기만 가능하다.
  
<hr/>

# 6.1 다대일
- 다대일 관게의 반대 방향은 항상 일대다 관계이다.
- 테이블의 일, 다 관계에서 외래 키는 항상 다쪽에 있다.
- 따라서 객체 양방향 관계에서 연관관계의 주인은 항상 다쪽이다.
- (다시 한 번 강조하지만 연관관계의 주인은 비즈니스 상에서의 중요도와는 무관하다)

<br/>

## 6.1.2 다대일 양방향 [N:1]

- 회원 엔티티
```java
@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name="MEMBER_ID")
    private Long id;

    private String username;

    @ManyToOne
    @JoinColumn(name="TEAM_ID")
    private Team team;

    public void setTeam(Team team) {
        this.team = team;

        if (!team.getMembers().contains(this)) {
            team.getMembers().add(this);
        }
    }
    ...
}
```

- 팀 엔티티

```java
@Entity
public class Team {

    @Id
    @GeneratedValue
    @Column(name="TEAM_ID")
    private Long id;

    private String name;

    @OneToMany(mappedBy="team")
    private List<Member> members = new ArrayList<Member>();

    public void addMember(Member member) {
        this.members.add(member);
        if (member.getTeam() != this) {
            member.setTeam(this);
        }
    }
    ...
}
```

- 양방향 연관관계는 항상 서로를 참조해야 한다
- 항상 서로 참조하게 하려면 연관관계 편의 메소드를 작성하는 것이 좋다.
- 편의 메소드는 한 곳에만 작성하거나 양쪽 다 작성할 수 있는데, 양쪽에 다 작성하면 무한루프에 빠지므로 주의해야 한다.
- 예제 코드는 편의 메소드를 양쪽에 다 작성해서 둘 중 하나만 호출하면 된다.
